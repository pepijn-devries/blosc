<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Data Types • blosc</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Data Types">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">blosc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.5.0001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/blosc-compression.html">Blosc Compression</a></li>
    <li><a class="dropdown-item" href="../articles/dtypes.html">Data Types</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pepijn-devries/blosc/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Data Types</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pepijn-devries/blosc/blob/master/vignettes/dtypes.Rmd" class="external-link"><code>vignettes/dtypes.Rmd</code></a></small>
      <div class="d-none name"><code>dtypes.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="what-are-data-types-and-why-should-you-care">What are Data Types (and Why Should You Care?)<a class="anchor" aria-label="anchor" href="#what-are-data-types-and-why-should-you-care"></a>
</h2>
<p>A data type is a description of how information is stored digitally
and in which format. In the context of BLOSC compression this is
relevant as it is used to compress arrays of structured data. How this
data is structured is described by the data type.</p>
<p>For the use of BLOSC in R, this is also relevant, because
<code>R</code> (by design) provides access to a limited number of data
types, most importantly: <code><a href="https://rdrr.io/r/base/raw.html" class="external-link">raw()</a></code>, <code><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical()</a></code>,
<code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer()</a></code>, <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric()</a></code> and
<code><a href="https://rdrr.io/r/base/complex.html" class="external-link">complex()</a></code>. Below you will find a table of typical storage
formats and how these are converted to <code>R</code> types.</p>
<p>Therefore, you probably need to convert the data type of stored data
to something that can be handled in <code>R</code> (or vice versa). For
your convenience the functions <code><a href="../reference/dtype.html">r_to_dtype()</a></code> and
<code><a href="../reference/dtype.html">dtype_to_r()</a></code> handle such conversions. Note that these
functions do not provide exhaustive features, but are meant to handle
most common conversions.</p>
</div>
<div class="section level2">
<h2 id="specification-version">Specification Version<a class="anchor" aria-label="anchor" href="#specification-version"></a>
</h2>
<p>The package at hand uses <a href="https://zarr-specs.readthedocs.io/en/latest/v2/v2.0.html" class="external-link">version
2</a> of data type specifications, while they are superseded by <a href="https://zarr-specs.readthedocs.io/en/latest/v3/data-types/index.html" class="external-link">version
3</a>. Why is this?</p>
<p>The old version is used as it still includes the endianness in its
encoding and is more compact. In combination with the endianness version
3 types can easily be annotated with version 2 data types. You have to
do this conversion yourself, it is not implemented by this package.</p>
</div>
<div class="section level2">
<h2 id="overview-of-data-types">Overview of Data Types<a class="anchor" aria-label="anchor" href="#overview-of-data-types"></a>
</h2>
<p>Data types are represented by a code where the first character
reflects the byte order of the data (see Wikipedia article about <a href="https://en.wikipedia.org/wiki/Endianness" class="external-link">Endianness</a>). The
second character reflects the main type of the data (such as integer, or
floating point). The following numerical characters indicate the size
(in bytes) of each element. For data types <code>M</code> (date time)
and <code>m</code> (delta time), the specification also includes the
unit of time used to store the information.</p>
<p>The table below shows an overview of common types, how the are
converted from and to <code>R</code> types, and some important notes to
consider while converting data.</p>
<table style="width:97%;" class="table">
<colgroup>
<col width="16%">
<col width="13%">
<col width="12%">
<col width="15%">
<col width="39%">
</colgroup>
<tbody>
<tr class="odd">
<td><strong>dtype code</strong></td>
<td colspan="2"><strong>Alternative notation</strong></td>
<td><strong>R type</strong></td>
<td><strong>Notes</strong></td>
</tr>
<tr class="even">
<td><code>|b1</code></td>
<td colspan="2">8 bit boolean</td>
<td><code><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical()</a></code></td>
<td>In <code>R</code> logical values are actually stored as a 32 bit
integer.</td>
</tr>
<tr class="odd">
<td>
<code>|i1</code>, <code>&lt;i2</code>, <code>&gt;i2</code>,
<code>&lt;i4</code>, <code>&gt;i4</code>
</td>
<td colspan="2">8 bit, 16 bit and 32 bit signed integers.</td>
<td><code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer()</a></code></td>
<td></td>
</tr>
<tr class="even">
<td>
<code>|u1</code>, <code>&lt;u2</code>, <code>&gt;u2</code>
</td>
<td colspan="2">8 bit and 16 bit unsigned integers</td>
<td><code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer()</a></code></td>
<td></td>
</tr>
<tr class="odd">
<td>
<code>&lt;u4</code>, <code>&gt;u4</code>, <code>&lt;u8</code>,
<code>&gt;u8</code>
</td>
<td colspan="2">32 and 64 bit unsigned integers</td>
<td><code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric()</a></code></td>
<td>Not all numbers of these types can be adequately represented by
neither R’s <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric()</a></code> nor <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer()</a></code>. Handle
these types with caution</td>
</tr>
<tr class="even">
<td>
<code>&lt;i8</code>, <code>&gt;i8</code>
</td>
<td colspan="2">64 bit signed integers</td>
<td><code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric()</a></code></td>
<td>Not all numbers of these types can be adequately represented by
neither R’s <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric()</a></code> nor <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer()</a></code>. Handle
these types with caution</td>
</tr>
<tr class="odd">
<td>
<code>&lt;f2</code>, <code>&gt;f2</code>, <code>&lt;f4</code>,
<code>&gt;f4</code>, <code>&lt;f8</code>, <code>&gt;f8</code>,</td>
<td colspan="2">16, 32 and 64 bit floating point numbers</td>
<td><code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric()</a></code></td>
<td></td>
</tr>
<tr class="even">
<td>
<code>&lt;c8</code>, <code>&gt;c8</code>, <code>&lt;c16</code>,
<code>&gt;c16</code>,</td>
<td colspan="2">64 bit and 128 bit complex numbers</td>
<td><code><a href="https://rdrr.io/r/base/complex.html" class="external-link">complex()</a></code></td>
<td></td>
</tr>
<tr class="odd">
<td>
<code>&lt;M8[*]</code> <code>&gt;M8[*]</code> where *=unit</td>
<td colspan="2">64 bit date time object</td>
<td><code><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct()</a></code></td>
<td>Note that the <code>dtype</code> stores the time unit as a 64 bit
integer, whereas POSIXct stores the object as a <code>double</code>. Use
with caution</td>
</tr>
<tr class="even">
<td>
<code>&lt;m8[*]</code> <code>&gt;m8[*]</code> where *=unit</td>
<td colspan="2">64 bit delta time object</td>
<td><code><a href="https://rdrr.io/r/base/difftime.html" class="external-link">difftime()</a></code></td>
<td>Note that the <code>dtype</code> stores the time unit as a 64 bit
integer, whereas <code>difftime</code> stores the object as a
<code>double</code>. Use with caution</td>
</tr>
</tbody>
</table>
<p>Some examples of encoding r data to dtypes</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pepijn-devries.github.io/blosc/">blosc</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/dtype.html">r_to_dtype</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>, <span class="st">"|b1"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 01 00</span></span>
<span><span class="fu"><a href="../reference/dtype.html">r_to_dtype</a></span><span class="op">(</span><span class="fl">1L</span><span class="op">:</span><span class="fl">4L</span>, <span class="st">"|u1"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 01 02 03 04</span></span>
<span><span class="fu"><a href="../reference/dtype.html">r_to_dtype</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.4</span>, <span class="fl">9.8e-6</span><span class="op">)</span>, <span class="st">"&lt;f8"</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] 66 66 66 66 66 66 f6 3f 33 76 78 be 55 8d e4 3e</span></span>
<span><span class="fu"><a href="../reference/dtype.html">r_to_dtype</a></span><span class="op">(</span><span class="fl">1</span><span class="op">+</span><span class="fl">1i</span>, <span class="st">"&lt;c16"</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] 00 00 00 00 00 00 f0 3f 00 00 00 00 00 00 f0 3f</span></span>
<span><span class="fu"><a href="../reference/dtype.html">r_to_dtype</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"2023-06-23 15:32:19"</span>, tz <span class="op">=</span> <span class="st">"UTC"</span><span class="op">)</span>, <span class="st">"&lt;M8[ms]"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] b8 83 e2 e8 88 01 00 00</span></span>
<span><span class="fu"><a href="../reference/dtype.html">r_to_dtype</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/difftime.html" class="external-link">as.difftime</a></span><span class="op">(</span><span class="fl">1</span>, units <span class="op">=</span> <span class="st">"weeks"</span><span class="op">)</span>, <span class="st">"&lt;m8[D]"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 07 00 00 00 00 00 00 00</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="precision-of-types">Precision of Types<a class="anchor" aria-label="anchor" href="#precision-of-types"></a>
</h2>
<p>Beware that when encoding <code>R</code> types to a
<code>dtype</code>, you may lose precision. You will receive no
notification, so it is your own responsibility. Loss of precision
happens when the data type you use for encoding is less precise than
<code>R</code>’s native type. For instance when you encode an
<code>R</code> <code>numeric</code> (64 bit floating point) to dtype
<code>"&lt;f2"</code> (16 bit floating point). This will become apparent
when you convert your dtype back to an <code>R</code> type.</p>
<p>Some examples where you will lose precision:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Encoding numeric (64 bit) as a 16 bit float:</span></span>
<span><span class="fu"><a href="../reference/dtype.html">r_to_dtype</a></span><span class="op">(</span><span class="fl">0.123</span>, <span class="st">"&lt;f2"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/dtype.html">dtype_to_r</a></span><span class="op">(</span><span class="st">"&lt;f2"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.1229858</span></span>
<span></span>
<span><span class="co">## Encoding a date-time object in whole hours</span></span>
<span><span class="co">## as opposed to a floating point of seconds</span></span>
<span><span class="fu"><a href="../reference/dtype.html">r_to_dtype</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"2024-05-31 19:58:01"</span>, tz <span class="op">=</span> <span class="st">"UTC"</span><span class="op">)</span>, <span class="st">"&lt;M8[h]"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/dtype.html">dtype_to_r</a></span><span class="op">(</span><span class="st">"&lt;M8[h]"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2024-05-31 19:00:00 UTC"</span></span></code></pre></div>
<p>Note that you will always need to use an identical <code>dtype</code>
to back-transform encoded data. Otherwise you will get nonsensical
results.</p>
</div>
<div class="section level2">
<h2 id="missing-values">Missing Values<a class="anchor" aria-label="anchor" href="#missing-values"></a>
</h2>
<p>When storing raw data, you may want to reserve a value to represent
missing values. This is also what <code>R</code> does for
<code>NA</code> values. Other software may use different values to
represent missing values. Also, some data types have insufficient
storage capacity to store <code>R</code> <code>NA</code> values</p>
<p>The examples below show how you can use custom values to prepresent
missing values.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## As `na_value` is not specified for `dtype_to_r()`</span></span>
<span><span class="co">## and the NA value is masked to 8 bit, the `NA`</span></span>
<span><span class="co">## value is mistakenly interpreted as `TRUE`</span></span>
<span><span class="fu"><a href="../reference/dtype.html">r_to_dtype</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">NA</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="op">)</span>, <span class="st">"|b1"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/dtype.html">dtype_to_r</a></span><span class="op">(</span><span class="st">"|b1"</span>, na_value <span class="op">=</span> <span class="cn">NA_integer_</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  TRUE  TRUE FALSE  TRUE</span></span>
<span></span>
<span><span class="co">## This can be fixed by specifying `na_value`</span></span>
<span><span class="fu"><a href="../reference/dtype.html">r_to_dtype</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">NA</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="op">)</span>, <span class="st">"|b1"</span>, na_value <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/dtype.html">dtype_to_r</a></span><span class="op">(</span><span class="st">"|b1"</span>, na_value <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  TRUE    NA FALSE  TRUE</span></span>
<span></span>
<span><span class="co">## If the `na_value` is not specified for `dtype_to_r()`,</span></span>
<span><span class="co">## it will be taken literally</span></span>
<span><span class="fu"><a href="../reference/dtype.html">r_to_dtype</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">4</span>, <span class="fl">5</span><span class="op">)</span>, <span class="st">"&lt;i4"</span>, na_value <span class="op">=</span> <span class="op">-</span><span class="fl">999</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/dtype.html">dtype_to_r</a></span><span class="op">(</span><span class="st">"&lt;i4"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]    1 -999    4    5</span></span>
<span></span>
<span><span class="co">## If the `na_value` is specified for `dtype_to_r()`,</span></span>
<span><span class="co">## it will interpreted as NA</span></span>
<span><span class="fu"><a href="../reference/dtype.html">r_to_dtype</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">4</span>, <span class="fl">5</span><span class="op">)</span>, <span class="st">"&lt;i4"</span>, na_value <span class="op">=</span> <span class="op">-</span><span class="fl">999</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/dtype.html">dtype_to_r</a></span><span class="op">(</span><span class="st">"&lt;i4"</span>, na_value <span class="op">=</span> <span class="op">-</span><span class="fl">999</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  1 NA  4  5</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Pepijn de Vries.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
